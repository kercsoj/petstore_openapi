openapi: 3.0.0
info:
  title: Custom Data API
  version: 1.0.0
paths:
  /api/v1/users/{user_id}/custom_data/{namespace}/{scope}:
    get:
      summary: Load custom user data
      description: |
        Arbitrary JSON data can be stored for a User. This API call retrieves that data for a (optional) given scope.
        See `UsersController#set_custom_data` for details and examples.

        On success, this endpoint returns an object containing the data that was requested.

        Responds with status code 400 if the namespace parameter, `ns`, is missing or invalid, or if the specified scope does not contain any data.
      parameters:
        - name: user_id
          in: path
          required: true
          description: The ID of the user.
          schema:
            type: string
        - name: namespace
          in: path
          required: true
          description: The namespace from which to retrieve the data. This should be something other Canvas API apps aren't likely to use, such as a reverse DNS for your organization.
          schema:
            type: string
        - name: scope
          in: path
          required: true
          description: The scope within the namespace to retrieve the data from.
          schema:
            type: string
        - name: ns
          in: query
          required: true
          description: The namespace parameter.
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: string
                    example: "pistachio ice cream"
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
      security:
        - bearerAuth: []
      x-examples:
        example_request:
          description: Example request
          value: |
            curl 'https://<canvas>/api/v1/users/<user_id>/custom_data/food_app/favorites/dessert' \
              -X GET \
              -F 'ns=com.my-organization.canvas-app' \
              -H 'Authorization: Bearer <token>'
        example_response:
          description: Example response
          value: |
            {
              "data": "pistachio ice cream"
            }
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT